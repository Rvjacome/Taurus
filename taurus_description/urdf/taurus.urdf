<?xml version="1.0" encoding="utf-8"?>
<!-- This URDF was automatically created by SolidWorks to URDF Exporter! Originally created by Stephen Brawner (brawner@gmail.com) 
     Commit Version: 1.6.0-4-g7f85cfe  Build Version: 1.6.7995.38578
     For more information, please see http://wiki.ros.org/sw_urdf_exporter -->
<robot name="taurus" xmlns:xacro="http://ros.org/wiki/xacro">
  
    <!-- Colors -->
    <material name="black">
        <color rgba="0.4 0.4 0.4 1.0"/>
    </material>

    <material name="white">
        <color rgba="1.0 1.0 1.0 1.0"/>
    </material>

    <material name="orange">
        <color rgba="${255/255} ${190/255} ${50/255} 0.98"/>
    </material>   

<!--link name="odom_frame"/>
    <joint name="odom_joint" type="fixed">
      <parent link="odom_frame" />
      <child link = "base_link" />
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
    </joint-->

    <!-- Links -->
    <link name="base_footprint"/>

    <link name="base_link">
        <inertial>
            <origin xyz="0.003868358578296 -0.000158188357109068 0.0163891387106582" rpy="0 0 0" />
            <mass value="0.3" />
            <inertia 
            ixx="0.0001" 
            ixy="0" 
            ixz="0" 
            iyy="0.0003" 
            iyz="0" 
            izz="0.0002" />
        </inertial>

        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
            <mesh filename="package://taurus_description/meshes/base_link.STL" />
            </geometry>
            <material name="orange"/>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="package://taurus_description/meshes/base_link.STL" />
            </geometry>
        </collision>
    </link>

    <joint name="base_joint" type="fixed">
        <parent link="base_footprint"/>
        <child link="base_link"/>
        <origin xyz="0.0 0.0 0.000" rpy="0 0 0"/>
    </joint>

    <link name="wheel_left_link">
        <inertial>
            <origin xyz="-2.0625E-05 -6.8524E-05 0.010935"
             rpy="0 0 0" />
            <mass value="0.3" />
            <inertia
            ixx="0.00002"
            ixy="0"
            ixz="0"
            iyy="0.00002"
            iyz="0"
            izz="0.0001" />
        </inertial>

        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="package://taurus_description/meshes/wheel_left_tire.STL" />
            </geometry>
            <material name="black" />
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <cylinder length="0.018" radius="0.016"/>
            </geometry>
        </collision>
    </link>

    <joint name="wheel_left_joint" type="continuous">
        <origin 
        xyz="-0.0033479 0.03711 0.0080001"
        rpy="-1.5708 0 -0.0018302" />
        <parent link="base_link" />
        <child link="wheel_left_link" />
        <axis xyz="0 0 1" />
    </joint>

    <link name="wheel_right_link">
        <inertial>
            <origin
              xyz="2.1073E-05 6.8519E-05 -0.010935"
              rpy="0 0 0" />
            <mass value="0.3" />
            <inertia 
            ixx="0.00002"
            ixy="0"
            ixz="0"
            iyy="0.00002"
            iyz="0"
            izz="0.0001" />
        </inertial>

        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="package://taurus_description/meshes/wheel_right_tire.STL" />
            </geometry>
            <material name="black" />
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <cylinder length="0.018" radius="0.016"/>
            </geometry>
        </collision>
    </link>

    <joint name="wheel_right_joint" type="continuous">
        <origin
          xyz="-0.0033372 -0.037239 0.0080194"
          rpy="-1.5708 0 -0.0018302" />
        <parent link="base_link" />
        <child link="wheel_right_link" />
        <axis xyz="0 0 1" />
    </joint>

    <link name="caster_ball_link">
        <inertial>
            <origin 
             xyz="0 1.3878E-17 0"
             rpy="0 0 0" />
            <mass value="0.2" />
            <inertia 
            ixx="0.0004"
            ixy="0"
            ixz="0"
            iyy="0.0004"
            iyz="0"
            izz="0.00001" />
        </inertial>

        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="package://taurus_description/meshes/caster_ball.STL" />
            </geometry>
            <material name="white"/>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="package://taurus_description/meshes/caster_ball.STL" />
            </geometry>
        </collision>
    </link>

    <joint name="caster_ball_joint" type="fixed">
        <origin
         xyz="0.057569 -4.6108E-05 -0.00046991"
         rpy="-1.5708 0 -0.0018302" />
        <parent link="base_link" />
        <child link="caster_ball_link" />
    </joint>

    <link name="scan_link">
        <inertial>
            <origin
             xyz="0 0 0"
             rpy="0 0 0" />
            <mass value="0.1" />
            <inertia 
            ixx="0.00001"
            ixy="0"
            ixz="0"
            iyy="0.000001"
            iyz="0"
            izz="0.000001" />
        </inertial>

        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="package://taurus_description/meshes/scan_link.STL" />
            </geometry>
            <material name="black"/>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="package://taurus_description/meshes/scan_link.STL" />
            </geometry>
        </collision>
    </link>

    <joint name="scan_joint" type="fixed">
        <origin 
        xyz="0.040761 0.00011153 0.016498"
        rpy="0 0 -0.0018302" />
        <parent link="base_link" /> 
        <child link="scan_link" />
        <axis xyz="0 0 1" />
    </joint>
    
    <joint name="imu_joint" type="fixed">
        <parent link="base_link"/>
        <child link="imu_link"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>

    <link name="imu_link"/>

<gazebo>
    <plugin name="two_wheeled_robot_diff_drive" filename="libgazebo_ros_diff_drive.so">
 
      <update_rate>100</update_rate>
      
      <!-- wheels -->
      <left_joint>wheel_left_joint</left_joint>
      <right_joint>wheel_right_joint</right_joint>
 
      <!-- kinematics -->
      <wheel_separation>0.07</wheel_separation>
      <wheel_diameter>0.016</wheel_diameter>
 
      <!-- limits -->
      <max_wheel_torque>20</max_wheel_torque>
      <max_wheel_acceleration>20.0</max_wheel_acceleration>
 
      <!-- Receive velocity commands on this ROS topic -->
      <command_topic>cmd_vel</command_topic>
 
      <!-- output -->
      <!-- When false, publish no wheel odometry data to a ROS topic -->
      <publish_odom>true</publish_odom>
 
      <!-- When true, publish coordinate transform from odom to base_footprint -->
      <!-- I usually use the robot_localization package to publish this transform -->  
      <publish_odom_tf>false</publish_odom_tf>
     
      <!-- When true, publish coordinate transform from base_link to the wheels -->
      <!-- The robot_state_publisher package is often used to publish this transform -->  
      <publish_wheel_tf>true</publish_wheel_tf>
 
      <odometry_topic>odom</odometry_topic>
      <odometry_frame>odom_link</odometry_frame>
      <robot_base_frame>base_footprint</robot_base_frame>
 
      <odometry_source>1</odometry_source>
      <ros>
        <remapping>odom:=wheel/odometry</remapping>
      </ros>
    </plugin>
  </gazebo>

  <gazebo>
    <plugin name="gazebo_ros_joint_state_publisher"
        filename="libgazebo_ros_joint_state_publisher.so">
        <update_rate>100</update_rate>
        <joint_name>caster_ball_joint</joint_name>

    </plugin>
  </gazebo>

</robot>
